# IV Crush 2.0 - Environment Configuration Template
# Copy this file to .env and fill in your actual values
# NEVER commit .env to version control (it's in .gitignore)

# ============================================================================
# API Keys (Required)
# ============================================================================

# Tradier API Key for real-time options data
# Get your key at: https://tradier.com/products/market-data
TRADIER_API_KEY=your_tradier_api_key_here

# Alpha Vantage API Key for earnings calendar and historical prices
# Get your free key at: https://www.alphavantage.co/support/#api-key
ALPHA_VANTAGE_KEY=your_alpha_vantage_key_here

# ============================================================================
# API Endpoints (Optional - defaults provided)
# ============================================================================

# Tradier API Base URL
# Production: https://api.tradier.com/v1
# Sandbox (testing): https://sandbox.tradier.com/v1
# TRADIER_BASE_URL=https://api.tradier.com/v1

# Alpha Vantage API Base URL
# ALPHA_VANTAGE_BASE_URL=https://www.alphavantage.co/query

# ============================================================================
# Database Configuration (Optional - defaults provided)
# ============================================================================

# Path to SQLite database file
# DB_PATH=data/ivcrush.db

# Database connection timeout in seconds
# DB_TIMEOUT=30

# ============================================================================
# Cache Configuration (Optional - defaults provided)
# ============================================================================

# L1 (memory) cache TTL in seconds
# CACHE_L1_TTL=30

# L2 (persistent) cache TTL in seconds (5 minutes)
# CACHE_L2_TTL=300

# ============================================================================
# Risk Management & Position Sizing (Optional - defaults provided)
# ============================================================================

# Kelly Criterion Position Sizing
# USE_KELLY_SIZING=true
# KELLY_FRACTION=0.25              # 25% of full Kelly (conservative)
# KELLY_MIN_EDGE=0.02              # 2% minimum edge (credit spreads typically 2-4%)
# KELLY_MIN_CONTRACTS=1

# Capital allocated for Kelly formula
# For $XXX portfolio targeting $20-25K max loss per trade:
# RISK_BUDGET_PER_TRADE=250000     # Kelly capital base (~42% of portfolio)

# For $400K portfolio targeting $15-20K max loss per trade:
# RISK_BUDGET_PER_TRADE=200000     # Kelly capital base (~50% of portfolio)

# For $200K portfolio targeting $8-12K max loss per trade:
# RISK_BUDGET_PER_TRADE=100000     # Kelly capital base (~50% of portfolio)

# Maximum contracts per position (hard safety cap)
# MAX_CONTRACTS=50                 # 50 contracts Ã— $500 max loss = $25K cap

# Minimum credit required per spread (quality filter)
# MIN_CREDIT_PER_SPREAD=0.50

# Commission per contract
# COMMISSION_PER_CONTRACT=0.65

# ============================================================================
# VRP Thresholds (Optional - defaults provided)
# ============================================================================

# VRP ratio thresholds for trade quality
# VRP_EXCELLENT=2.0    # Excellent: VRP > 2.0x (strong edge)
# VRP_GOOD=1.5         # Good: VRP > 1.5x (decent edge)
# VRP_MARGINAL=1.2     # Marginal: VRP > 1.2x (minimal edge)

# Minimum historical data required (quarters)
# MIN_HISTORICAL_QUARTERS=2

# ============================================================================
# Strategy Configuration (Optional - defaults provided)
# ============================================================================

# Target delta for short strikes (probability ~30% ITM)
# TARGET_DELTA_SHORT=0.30

# Target delta for long strikes (probability ~20% ITM)
# TARGET_DELTA_LONG=0.20

# Spread width as % of stock price (minimum $5)
# SPREAD_WIDTH_PERCENT=0.05

# Iron butterfly wing width as % of stock price
# IRON_BUTTERFLY_WING_WIDTH_PCT=0.05

# ============================================================================
# Liquidity Requirements (Optional - defaults provided)
# ============================================================================

# Minimum open interest required
# MIN_OPEN_INTEREST=50

# Minimum daily volume required
# MIN_VOLUME=20

# Maximum bid-ask spread as % of mid price
# MAX_SPREAD_PCT=10.0

# ============================================================================
# Logging (Optional - defaults provided)
# ============================================================================

# Logging level: DEBUG, INFO, WARNING, ERROR
# LOG_LEVEL=INFO

# Enable request tracing for debugging
# ENABLE_TRACING=false

# ============================================================================
# Algorithm Toggles (Optional - defaults provided)
# ============================================================================

# Use interpolated implied move calculator (Phase 4)
# USE_INTERPOLATED_MOVE=true

# Use enhanced skew analysis (Phase 4)
# USE_ENHANCED_SKEW=true

# Use enhanced consistency scoring (Phase 4)
# USE_ENHANCED_CONSISTENCY=true

# VRP move metric: percentile_50, percentile_75, percentile_90
# VRP_MOVE_METRIC=percentile_75

# ============================================================================
# Notes
# ============================================================================
# - All optional values have sensible defaults
# - Only TRADIER_API_KEY and ALPHA_VANTAGE_KEY are required
# - See README.md for detailed configuration guide
# - See config.py for all available options
# - Validated VRP thresholds (November 2024):
#   * VRP_EXCELLENT=2.0 (Sharpe 8.07, 100% win rate on 8 trades)
#   * VRP_GOOD=1.5 (strong historical performance)
#   * VRP_MARGINAL=1.2 (minimum acceptable edge)
