# Budget Configuration for API Usage
# Edit these values to control costs

# Earnings Calendar Source
# Options: 'nasdaq' (free, unlimited) or 'alphavantage' (official NASDAQ vendor, 25 calls/day)
earnings_source: "alphavantage"  # Default to Alpha Vantage for better data quality

# Perplexity monthly hard limit (USD) - HARD STOP at $4.98
perplexity_monthly_limit: 4.98

# Total monthly budget including fallback models (USD)
monthly_budget: 5.00

# Warn when reaching this percentage of Perplexity budget
warn_at_percentage: 80  # Warn at $3.98

# Stop all API calls when budget exceeded
hard_stop: true

# Model cascade strategy (order of preference)
# When Perplexity limit reached, automatically fall back to next model
model_cascade:
  enabled: true
  order:
    - "perplexity"  # Try Perplexity first (until $4.98 limit)
    - "google"      # Fall back to Google Gemini (FREE)

# Model selection and costs
models:
  # Perplexity models
  sonar-pro:
    cost_per_1k_tokens: 0.005  # $5 per 1M tokens
    timeout: 20  # seconds
    use_case: "daily"  # Daily routine analysis

  # GPT models via Perplexity API (uses same PERPLEXITY_API_KEY)
  gpt-4o:
    cost_per_1k_tokens: 0.001  # $1 per 1M tokens via Perplexity
    timeout: 30  # seconds
    use_case: "daily"  # Good for strategy generation

  gpt-4o-mini:
    cost_per_1k_tokens: 0.0002  # $0.20 per 1M tokens via Perplexity
    timeout: 30  # seconds
    use_case: "daily"  # Cheaper alternative

  # Google Gemini models (fallback)
  gemini-2.0-flash:
    provider: "google"
    cost_per_1k_tokens: 0.0  # Free tier: 1500 RPD
    timeout: 30
    use_case: "fallback"
    api_key_env: "GOOGLE_API_KEY"
    free_tier_limit: 1500  # Requests per day

# Daily limits
daily_limits:
  max_tickers: 10  # Maximum tickers to analyze per day (increased from 5)
  max_api_calls: 40  # Total API calls per day (increased from 20 to handle 10+ tickers)

  # Per-model daily limits
  sonar-pro_calls: 40  # Primary model for daily analysis (increased from 20)
  gpt-4o_calls: 10  # Strategy generation
  gpt-4o-mini_calls: 40  # Cheaper alternative for strategy generation (increased from 20)

# Default model preferences
defaults:
  sentiment_model: "sonar-pro"     # Sonar Pro for Reddit sentiment analysis ($0.005/1k tokens)
  strategy_model: "sonar-pro"      # Use sonar-pro for strategies (gpt-4o-mini not available via Perplexity API)

# Alpha Vantage (free tier)
alpha_vantage:
  calls_per_day: 25  # Free tier limit
  cost_per_call: 0.00  # Free

# Logging
logging:
  enabled: true
  log_file: "data/usage.json"
  log_level: "INFO"
